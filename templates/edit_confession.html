{% extends "base.html" %}
{% block content %}
<h2>Edit Confession</h2>
<form method="POST" enctype="multipart/form-data">
    <label for="title" style="display:block;text-align:left;margin-bottom:6px;font-size:1rem;">Title:</label>
    <input type="text" id="title" name="title" value="{{ confession.title }}" required style="width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box;font-size:1rem;margin-bottom:12px;">

    <label for="description" style="display:block;text-align:left;margin-bottom:6px;font-size:1rem;">Description:</label>
    <input type="text" id="description" name="description" value="{{ confession.description }}" required style="width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box;font-size:1rem;margin-bottom:12px;">

    <label for="confession" style="display:block;text-align:left;margin-bottom:6px;font-size:1rem;">Main Content:</label>
    <textarea id="confession" name="confession" rows="6" required style="width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box;font-size:1rem;margin-bottom:12px;resize:vertical;">{{ confession.text }}</textarea>

    <label style="display:block;text-align:left;margin-bottom:6px;font-size:1rem;">Current Files:</label>
    {% if confession.files and confession.files|length > 0 %}
        <ul>
        {% for file in confession.files %}
            <li>
                <a class="file-link" href="{{ url_for('uploaded_file', filename=file) }}" target="_blank">{{ file }}</a>
                <label style="font-weight:400;">
                    <input type="checkbox" name="remove_files" value="{{ file }}"> Remove
                </label>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No files uploaded.</p>
    {% endif %}

    <label for="files">Add New Files:</label>
    <input type="file" id="files" name="files" multiple>

    <button type="submit">Update Confession</button>
    <style>
        @media (max-width: 480px) {
            input, textarea, button {
                font-size: 0.95rem !important;
                padding: 10px 0 !important;
            }
        }
    </style>
</form>
{% endblock %}
