{% extends "base.html" %}
{% block content %}
<h2>AI Assistant Chat</h2>
<div id="chat-box" style="background:#f4f8fb;padding:20px;border-radius:10px;min-height:200px;max-height:400px;overflow-y:auto;margin-bottom:20px;">
    <style>
        @media (max-width: 700px) {
            #chat-box {
                padding: 8px !important;
            }
            button, input {
                font-size: 0.95rem !important;
                padding: 10px 0 !important;
            }
        }
        @media (max-width: 480px) {
            #chat-box {
                padding: 4px !important;
            }
            button, input {
                font-size: 0.92rem !important;
                padding: 8px 0 !important;
            }
        }
    </style>
    {% for message in chat_history %}
        <div style="margin-bottom:10px;">
            <b style="color:{{ 'green' if message['role']=='user' else 'blue' }};">
                {{ 'You' if message['role']=='user' else 'Supportive AI' }}:
            </b>
            <span>{{ message['text']|e }}</span>
        </div>
    {% endfor %}
</div>
<form method="POST" style="display:flex;gap:10px;">
    <input type="text" name="user_message" placeholder="Type your message..." style="flex:1;" required>
    <button type="submit">Send</button>
</form>
{% endblock %}
