{% extends "base.html" %}
{% block content %}
<h2>My Confessions</h2>
{% if confessions %}
    <ul style="list-style:none;padding:0;">
    {% for confession in confessions %}
        <li style="margin-bottom:30px;padding:20px;border:1px solid #eee;border-radius:8px;">
            <strong>{{ confession.title }}</strong><br>
            <em>{{ confession.description }}</em><br>
            <div>{{ confession.text }}</div>
            {% if confession.files and confession.files|length > 0 %}
                <div>Files:
                    <ul>
                    {% for file in confession.files %}
                        <li><a href="{{ url_for('uploaded_file', filename=file) }}" target="_blank">{{ file }}</a></li>
                    {% endfor %}
                    </ul>
                </div>
            {% endif %}
            <form action="{{ url_for('edit_confession', post_id=confession.id) }}" method="get" style="display:inline;">
                <button type="submit">Edit</button>
            </form>
            <form action="{{ url_for('delete_confession', post_id=confession.id) }}" method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this confession?');">Delete</button>
            </form>
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>You have not posted any confessions yet.</p>
{% endif %}
{% endblock %}
