{% extends "base.html" %}
{% block content %}
<h2 style="margin-bottom:30px;">My Confessions</h2>
{% if confessions %}
    <ul style="list-style:none;padding:0;">
    {% for confession in confessions %}
        <li class="confession">
            <div style="margin-bottom:8px;"><b>Title:</b> <span style="font-size:1.1em;">{{ confession.title }}</span></div>
            <div style="margin-bottom:8px;"><b>Description:</b> <span style="color:#555;">{{ confession.description }}</span></div>
            <div style="margin-bottom:12px;"><b>Main Content:</b><br>
                <div style="margin-left:10px;">{{ confession.text }}</div>
            </div>
            {% if confession.files and confession.files|length > 0 %}
                <div style="margin-bottom:12px;">Files:
                    <ul>
                    {% for file in confession.files %}
                        <li><a class="file-link" href="{{ url_for('uploaded_file', filename=file) }}" target="_blank">{{ file }}</a></li>
                    {% endfor %}
                    </ul>
                </div>
            {% endif %}
            <div style="display:flex;gap:10px;">
                <form action="{{ url_for('edit_confession', post_id=confession.id) }}" method="get" style="display:inline;">
                    <button type="submit">Edit</button>
                </form>
                <form action="{{ url_for('delete_confession', post_id=confession.id) }}" method="post" style="display:inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this confession?');">Delete</button>
                </form>
            </div>
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>You have not posted any confessions yet.</p>
{% endif %}
{% endblock %}
